---
{"tags":["C-lang"],"dg-publish":true,"permalink":"/技術文件/C 語言學習/結構體指針傳遞練習題 1/","dgPassFrontmatter":true}
---


```C
#include <string.h>
#include <stdio.h>
/*結構體傳參*/
// 聲明一個結構體
struct Dog
{
   char name[20];
   int age;
   double weight;
};

// 只能在這邊聲明返回指針
// 陣列在表達式中會自動轉換為指針
char *say(struct Dog dog){
    static char info[100]; // 需要將局部變量，宣告為 static, 確保在 say 函數運行後，不會銷毀
    sprintf(info, "Name: %s, Age: %d, Weight: %.2lf", dog.name, dog.age, dog.weight);
    return info; //實際是返回陣列的[0] 位置的指針
}

// 方式 2, 指針傳遞
char *say1(struct Dog *dog_ptr){
    static char info[100]; // 需要將局部變量，宣告為 static, 確保在 say 函數運行後，不會銷毀
    (*dog_ptr).age = (*dog_ptr).age + 1;
    sprintf(info, "Name: %s, Age: %d, Weight: %.2lf", (*dog_ptr).name, (*dog_ptr).age, (*dog_ptr).weight);
    return info; //實際是返回陣列的[0] 位置的指針
}

// 結構體指針
int main()
{
    // 聲明結構體變量，並初始化
    struct Dog myDog;
    strcpy(myDog.name, "大黃");
    myDog.age = 2;
    myDog.weight = 2.3;

    char *result = say(myDog);
    printf("info=%s\n", result);

    char *result2 = say1(&myDog);
    printf("info=%s\n", result2);
    return 0;
}
```