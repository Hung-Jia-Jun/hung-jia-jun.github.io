---
{"dg-publish":true,"permalink":"/技術文件/C 語言學習/二級指針(多重指針)/","tags":["C-lang"],"created":"2025-08-19T21:28:02.094+08:00","updated":"2025-12-18T00:19:57.298+08:00"}
---


![Pasted image 20250819212809.png](/img/user/images/Pasted%20image%2020250819212809.png)

例題 1:
``` C
// 野指針
#include <stdio.h>
int main(){
    int num = 10;
    int *p1 = &num; // p1 指向 num 的地址
    int *p2 = p1;   // p2 也指向 num 的地址（與 p1 相同）
    printf("%p\n", p1); // 輸出 p1（num 的地址）
    printf("%p\n", p2); // 輸出 p2（num 的地址，與 p1 相同）

    // 故，p2 不是二級指針，因為他還是指向 p1 的 num 地址

    // 記憶體示意圖
    // 記憶體地址    變數      值
    // 0x1000       num      10
    // 0x2000       p1       0x1000  (num的地址)
    // 0x3000       p2       0x1000  (複製p1的值，也是num的地址)
    return 0;
}

// execute: 
//  clang PointerTest-4.c -o PointerTest-4 && ./PointerTest-4
```

例題 2:
``` C
// 二重指針
#include <stdio.h>
int main(){
    int num = 10;
    int *p1 = &num; // p1 指向 num 的地址
    int *p2 = p1;   // p2 也指向 num 的地址（與 p1 相同）
    printf("%p\n", p1); // 輸出 p1（num 的地址）
    printf("%p\n", p2); // 輸出 p2（num 的地址，與 p1 相同）
    *p2 = 100; // 將 p2 所在的位址的值改為 100
    printf("%d\n", *p2); // 100
    printf("num: %d\n", num); // 因為 p2 取的是 num 的位址，當 *p2 賦值時，其實是修改 num 所在記憶體空間的值
    return 0;
}

```

``` C
// 二級指針
#include <stdio.h>
int main(){
    int a = 10;
    int *p3 = &a;

    // 如何聲明二級指針
    // 但是此時 p4 定義的二級指針寫法錯誤
    int *p4 = &p3;
    printf("%p\n", p3); // 0x16b74aadc
    printf("%p\n", &p3); // 0x16b74aad0
    printf("%p\n", p4); // 0x16b74aad0
    printf("%p\n", &p4); // 0x16f05eac8(p4 的地址)

    // 正確的定義二級指針語法
    int **p5 = &p3;
    printf("%d\n", *p5); // 1868049116
    printf("%d\n", **p5); // 10(正確， **p5 = p3 指針所指向的 a 的值)

    **p5 = 100;
    printf("%d\n", **p5); // 10(正確， **p5 = p3 指針所指向的 a 的值)
    printf("%d\n", a); // 10(正確，**p5 = p3 指針所指向的 a 的值)
}

// execute: 
//  clang PointerTest-4.c -o PointerTest-4 && ./PointerTest-4
```

二級指針只能由指針賦值，不能直接拿地址賦值
``` C
// 舉例 1:
int b = 5;
int **p1 = &b; // 這裡出錯，因為 b 是 int 類型，就算 &b 也是取 int 的地址，但 **p1 是二級指針

// 正確
int b = 5;
int *pp0 = &b; // 需要經過一個轉換，轉換成指針形態才能賦值給二級指針
int **p1 = &pp0;
printf("%d\n", **p1); 
```

![Pasted image 20250819225732.png](/img/user/images/Pasted%20image%2020250819225732.png)


# 多級指針解引用
![Pasted image 20250819230308.png](/img/user/images/Pasted%20image%2020250819230308.png)

``` C
// 二級指針 -> 多級指針
#include <stdio.h>
int main(){
    int var = 5;
    int *ptr = &var;
    printf("%d\n", *ptr);
    int **pptr = &ptr; // 二級指針
    printf("%d\n", **pptr);
    int ***ppptr = &pptr; // 三級指針
    printf("%d\n", ***ppptr); // 三級指針解引用

    ***ppptr = 100; // 其實修改的是 var 的變數值
    // 所有引用這個地址的值都被修改了
    printf("%d\n", *ptr); 
    printf("%d\n", **pptr);
    printf("%d\n", ***ppptr);
    
}

// execute: 
//  clang PointerTest-4.c -o PointerTest-4 && ./PointerTest-4
```


![Pasted image 20250819231450.png](/img/user/images/Pasted%20image%2020250819231450.png)